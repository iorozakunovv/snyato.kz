function parseQueryString(a){var b={};return a.split("&").forEach(function(a){var c=a.split("=");0!==c[0].length&&c[1]&&(b[c[0]]=c[1])}),b}function encodeData(a){return Object.keys(a).map(function(b){return[b,a[b]].map(encodeURIComponent).join("=")}).join("&")}function createLoader(a){var b=a.createElement("div");return b.className="main-loader",b.innerHTML='<div class="main-loader_ae-spinner-bg"><div class="main-loader_ae-spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>',b}function getReferrer(){var a=/^(http(s)?:\/\/)?(www\.)?/;return document.referrer&&-1!==document.referrer.replace(a,"").indexOf(window.location.hostname.replace(/^www\./i,""))?"":document.referrer}var aeWidgetIframe;Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}),Object.values||(Object.values=function(a){if(a!==Object(a))throw new TypeError("Object.values called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(a[b]);return c}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(a):"function"==typeof define&&define.amd?define(b):b(a)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(global){"use strict";var _Base64=global.Base64,version="2.4.9",buffer;if("undefined"!=typeof module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(a){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a.charAt(c)]=c;return b}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(a){if(a.length<2){var b=a.charCodeAt(0);return b<128?a:b<2048?fromCharCode(192|b>>>6)+fromCharCode(128|63&b):fromCharCode(224|b>>>12&15)+fromCharCode(128|b>>>6&63)+fromCharCode(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return fromCharCode(240|b>>>18&7)+fromCharCode(128|b>>>12&63)+fromCharCode(128|b>>>6&63)+fromCharCode(128|63&b)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(a){return a.replace(re_utob,cb_utob)},cb_encode=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0);return[b64chars.charAt(c>>>18),b64chars.charAt(c>>>12&63),b>=2?"=":b64chars.charAt(c>>>6&63),b>=1?"=":b64chars.charAt(63&c)].join("")},btoa=global.btoa?function(a){return global.btoa(a)}:function(a){return a.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(a){return(a.constructor===buffer.constructor?a:buffer.from(a)).toString("base64")}:function(a){return(a.constructor===buffer.constructor?a:new buffer(a)).toString("base64")}:function(a){return btoa(utob(a))},encode=function(a,b){return b?_encode(String(a)).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):_encode(String(a))},encodeURI=function(a){return encode(a,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return fromCharCode(55296+(c>>>10))+fromCharCode(56320+(1023&c));case 3:return fromCharCode((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return fromCharCode((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},btou=function(a){return a.replace(re_btou,cb_btou)},cb_decode=function(a){var b=a.length,c=b%4,d=(b>0?b64tab[a.charAt(0)]<<18:0)|(b>1?b64tab[a.charAt(1)]<<12:0)|(b>2?b64tab[a.charAt(2)]<<6:0)|(b>3?b64tab[a.charAt(3)]:0),e=[fromCharCode(d>>>16),fromCharCode(d>>>8&255),fromCharCode(255&d)];return e.length-=[0,0,2,1][c],e.join("")},atob=global.atob?function(a){return global.atob(a)}:function(a){return a.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(a){return(a.constructor===buffer.constructor?a:buffer.from(a,"base64")).toString()}:function(a){return(a.constructor===buffer.constructor?a:new buffer(a,"base64")).toString()}:function(a){return btou(atob(a))},decode=function(a){return _decode(String(a).replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var a=global.Base64;return global.Base64=_Base64,a};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(a){return encode(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),"undefined"!=typeof module&&module.exports?module.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}}),function(a){var b;if("function"==typeof define&&define.amd&&define(a),"object"==typeof exports&&(module.exports=a()),!b){var c=window.Cookies,d=window.Cookies=a();d.noConflict=function(){return window.Cookies=c,d}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function c(d){function e(){}function f(b,c,f){if("undefined"!=typeof document){f=a({path:"/"},e.defaults,f),"number"==typeof f.expires&&(f.expires=new Date(1*new Date+864e5*f.expires)),f.expires=f.expires?f.expires.toUTCString():"";try{var g=JSON.stringify(c);/^[\{\[]/.test(g)&&(c=g)}catch(a){}c=d.write?d.write(c,b):encodeURIComponent(String(c)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var h="";for(var i in f)f[i]&&(h+="; "+i,!0!==f[i]&&(h+="="+f[i].split(";")[0]));return document.cookie=b+"="+c+h}}function g(a,c){if("undefined"!=typeof document){for(var e={},f=document.cookie?document.cookie.split("; "):[],g=0;g<f.length;g++){var h=f[g].split("="),i=h.slice(1).join("=");c||'"'!==i.charAt(0)||(i=i.slice(1,-1));try{var j=b(h[0]);if(i=(d.read||d)(i,j)||b(i),c)try{i=JSON.parse(i)}catch(a){}if(e[j]=i,a===j)break}catch(a){}}return a?e[a]:e}}return e.set=f,e.get=function(a){return g(a,!1)},e.getJSON=function(a){return g(a,!0)},e.remove=function(b,c){f(b,"",a(c,{expires:-1}))},e.defaults={},e.withConverter=c,e}return c(function(){})}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}});var aeHandle=function(a,b,c,d){function e(){var a=function(a){return new b(a)},b=function(a){var b;"string"==typeof a&&a.length>0?b="<"===a.substr(0,1)?c.create(a):c.find(document,a):"object"==typeof a&&null!==a&&(b=a),this.elements=[];var d=Object.prototype.toString.call(b);return b&&("[object HTMLCollection]"===d||"[object NodeList]"===d?this.elements=Array.prototype.slice.call(b):"[object Array]"===d?this.elements=b:"[SweetyElement]"===b.toString()?this.elements=b.elements:this.elements=[b]),this},c=a.fn={create:function(a){var b=document.createElement("div");return b.innerHTML=a,b.children},find:function(a,b){var c;switch(b.substr(0,1)){case".":c=a.getElementsByClassName(b.substr(1));break;case"#":c=a.getElementById(b.substr(1));break;case"@":c=a.getElementsByName(b.substr(1));break;default:c=a.getElementsByTagName(b)}return c},each:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c,a)},objEach:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},contains:function(a,b){return-1!==a.indexOf(b)},getClasses:function(a){return""===a.className?[]:a.className.split(/\s+/)},saveClasses:function(a,b){a.className=b.join(" ")},getStyles:function(a){var b=a.style.cssText.split(/;\s*/),c={};return this.each(b,function(a){var b=a.split(/:\s*/);2===b.length&&(c[b[0]]=b[1])}),c},saveStyles:function(a,b){var c=[];this.objEach(b,function(a,b){c.push(a+":"+b)}),a.style.cssText=c.join(";")}};return b.prototype={toArray:function(){return this.elements},findChild:function(b){return this.elements[0]?a(c.find(this.elements[0],b)):a()},findParent:function(b){if(!this.elements[0])return a();var d=this.elements[0];if(!b)return this.parent();if("."===b.substr(0,1))do{d=d.parentElement}while(!c.contains(c.getClasses(d),b.substr(1)));else do{d=d.parentElement}while(d.tagName.toUpperCase()!==b.toUpperCase());return a(d)},parent:function(){return this.elements[0]?a(this.elements[0].parentElement):a()},forEach:function(a){return c.each(this.elements,a),this},getProp:function(a){if(this.elements[0])return this.elements[0][a]},setProp:function(a,b){var d={};return"object"==typeof a?d=a:d[a]=b,this.forEach(function(a){c.objEach(d,function(b,c){a[b]=c})}),this},prop:function(a,b){return void 0!==b||"object"==typeof a?this.setProp(a,b):this.getProp(a)},getAttr:function(a){return this.elements[0]?this.elements[0].getAttribute(a):null},setAttr:function(a,b){var d={};return"[object Object]"===a.toString()?d=a:d[a]=b,this.forEach(function(a){c.objEach(d,function(b,c){a.setAttribute(b,c)})}),this},removeAttr:function(a){var b=[];return"object"==typeof a?b=a:b.push(a),this.forEach(function(a){c.each(b,function(b){a.removeAttribute(b)})}),this},hasAttr:function(a){return!!this.elements[0]&&this.elements[0].hasAttribute(a)},attr:function(a,b){return void 0!==b||"object"==typeof a?(this.setAttr(a,b),this):this.getAttr(a)},val:function(a){var b;return this.elements[0]&&"SELECT"===this.elements[0].tagName&&this.elements[0].multiple?void 0!==a?("string"==typeof a&&(a=a.split(" ")),this.findChild("option").forEach(function(b){c.contains(a,b.value)?b.selected=!0:b.selected=!1}),this):(b=[],this.findChild("option").forEach(function(a){a.selected&&b.push(a.value)}),b.length>0?b:null):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"radio"===this.elements[0].type?void 0!==a?(this.forEach(function(b){b.value===a?b.checked=!0:b.checked=!1}),this):(b=null,this.forEach(function(a){a.checked&&(b=a.value)}),b):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"checkbox"===this.elements[0].type?void 0!==a?("string"==typeof a&&(a=a.split(" ")),this.forEach(function(b){c.contains(a,b.value)?b.checked=!0:b.checked=!1}),this):(b=[],this.forEach(function(a){a.checked&&b.push(a.value)}),b.length>0?b:null):void 0!==this.prop("value")?this.prop("value",a):this.attr("value",a)},addClass:function(a){return"string"==typeof a&&(a=a.split(/\s+/)),this.forEach(function(b){var d=c.getClasses(b);c.each(a,function(a){-1===d.indexOf(a)&&d.push(a)}),c.saveClasses(b,d)}),this},removeClass:function(a){return"string"==typeof a&&(a=a.split(/\s+/)),this.forEach(function(b){var d=c.getClasses(b);c.each(a,function(a){var b=d.indexOf(a);-1!==b&&d.splice(b,1)}),c.saveClasses(b,d)}),this},hasClass:function(a){return!!this.elements[0]&&c.contains(c.getClasses(this.elements[0]),a)},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a),this},addStyle:function(a,b){return this.forEach(function(d){var e=c.getStyles(d);void 0!==b?e[a]=b:"object"==typeof a&&c.objEach(a,function(a,b){e[a]=b}),c.saveStyles(d,e)}),this},removeStyle:function(a){return"string"==typeof a&&(a=[a]),this.forEach(function(b){var d=c.getStyles(b);c.each(a,function(a){delete d[a]}),c.saveStyles(b,d)}),this},css:function(a,b){return this.addStyle(a,b)},html:function(a){if(void 0!==a)return this.empty().forEach(function(b){b.innerHTML=a}),this;if(this.elements[0])return this.elements[0].innerHTML},empty:function(){return this.forEach(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)}),this},append:function(a){return this.elements[0]&&a?("[SweetyElement]"===a.toString()?c.each(a.elements,function(a){this.elements[0].appendChild(a)}.bind(this)):this.elements[0].appendChild(a),this):this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)}),this.elements=[]},on:function(a,b){return"string"==typeof a&&(a=a.split(" ")),c.each(a,function(a){this.forEach(function(c){c.addEventListener(a,b,!1),c.sweetyEvents=c.sweetyEvents||{},c.sweetyEvents[a]=c.sweetyEvents[a]||[],c.sweetyEvents[a].push(b)})}.bind(this)),this},off:function(a,b){return"string"==typeof a&&(a=a.split(" ")),c.each(a,function(a){this.forEach(function(c){b?c.removeEventListener(a,b,!1):c.sweetyEvents&&c.sweetyEvents[a]&&(c.sweetyEvents[a].forEach(function(b){c.removeEventListener(a,b,!1)}),c.sweetyEvents[a]=[])})}.bind(this)),this},exists:function(){return 0!==this.elements.length},toString:function(){return"[SweetyElement]"}},c.each(arguments,function(a){"object"==typeof a&&c.objEach(a,function(a,c){"function"==typeof c&&(b.prototype[a]=c)})}),a}var f,g=e(),h=!1,i=parseQueryString(d.src.replace(/^[^\?]+\??/,"")),j=parseQueryString(window.location.href.replace(/^[^\?]+\??/,"").toLowerCase()),k=getReferrer(),l=Cookies.get("aew_ref_utm")||"",m=Cookies.get("roistat_visit")||"";if(!l&&(k||j.utm_source||j.utm_campaign)){var n={referrer:k,utm_source:j.utm_source,utm_medium:j.utm_medium,utm_campaign:j.utm_campaign,utm_content:j.utm_content};Cookies.set("aew_ref_utm",n,{expires:365}),l=Cookies.get("aew_ref_utm")}l&&(l=Base64.encode(l));var o={params:i,open:function(a,c,d){Cookies.remove("aew_ref_utm"),["hall_id","photosession_id","order_type","date_start","product_id","render_checkout","coupon_code","event_id"].forEach(function(a){o.params[a]=""}),c?["hall_id","photosession_id","order_type","date_start","product_id","render_checkout","coupon_code","event_id"].forEach(function(a){o.params[a]=c.attr(a)||""}):d&&Object.keys(d).forEach(function(a){o.params[a]=d[a]}),aeWidgetIframe&&aeWidgetIframe.remove(),aeWidgetIframe=b.createElement("div"),aeWidgetIframe.className="aeWidgetIFrameDIV",aeWidgetIframe.appendChild(createLoader(b));var e=b.createElement("iframe");e.className="aeWidgetIFrame",e.src=p+"/widget?widget_key="+a+"&"+encodeData(o.params)+"&aew_ref_utm="+l+"&roistat_visit="+m,aeWidgetIframe.appendChild(e),b.body.appendChild(aeWidgetIframe),g("body").addClass("aeWidgetParentActive")}},p="https://appevent.ru";i.url&&(p=i.url);var q=void 0!==i.type?i.type:"",r=b.createElement("link");if(r.type="text/css",r.href=p+(h?"/widgets/widget_front.css":"/widgets/widget_front.min.css"),r.rel="stylesheet",b.body.appendChild(r),void 0===i.silent){var s=g("landing"==q?"<a class='aeWidgetBtn' href='"+p+"/widget/landing?widget_key="+i.widget_key+"&aew_ref_utm="+l+"&roistat_visit="+m+"' target='_blank'></a>":"<div class='aeWidgetBtn'></div>");s.append(g('<div class="aeWidgetBtn-Wave"></div>'));var t=function(){var a,b,c="aeWidgetBtn-rotate-icon",d={},e=!1,f=function(){[{name:"book",text:"БРОНЬ<br/>ОНЛАЙН",duration:3e3},{name:"logo",text:"",duration:3e3}].forEach(function(a,c,e){var f=g("<div></div>");f.addClass("aeWidgetBtn-icon aeWidgetBtn-icon_"+a.name),f.html(a.text),s.append(f),b||(b=a.name),d[a.name]={element:f,next:e[(c+1)%e.length].name,duration:a.duration}}),h()},h=function(){e=!0;var f=function(b){g(".aeWidgetBtn").findChild(".aeWidgetBtn-icon").removeClass(c),d[b].element.addClass(c),function(b){a=setTimeout(function(){e&&(d[b].element.removeClass(c),f(d[b].next))},d[b].duration)}(b)};f(b)};return{init:f,reset:function(){clearTimeout(a),setTimeout(function(){e||h()},30)},stop:function(){e=!1,clearTimeout(a),g(".aeWidgetBtn").findChild(".aeWidgetBtn-icon").removeClass(c)}}}();s.on("mouseover",function(){t.stop()}).on("mouseleave",function(){t.reset()}),t.init(),"landing"!=q&&s.on("click",function(){o.open(i.widget_key)})}g(".aeWidgetOpen").on("click",function(){o.open(g(this).attr("widget_key"),g(this))}),g("a").forEach(function(a){var b=g(a);/aeWidgetOpen/.test(b.attr("href"))&&b.on("click",function(){var a={};return b.attr("href").split("#aeWidgetOpen-")[1]&&b.attr("href").split("#aeWidgetOpen-")[1].split(",").forEach(function(b){var c=b.split("=");0!==c[0].length&&c[1]&&(a[c[0]]=c[1])}),o.open(i.widget_key,null,a),!1})}),window.AppEventWidget={open:function(a){o.open(a.widget_key||o.params.widget_key,null,a)}},window.onmessage=function(a){if(f&&0!=f.length||(f=window.Ya&&window.Ya._metrika&&window.Ya._metrika.counters?Object.values(window.Ya._metrika.counters):[]),"scroll_to_top"===a.data&&document.querySelector(".aeCustomWidget")&&setTimeout(function(){document.querySelector(".aeCustomWidget").scrollIntoView({behavior:"smooth",block:"start"})},201),"close_ae_widget"===a.data)aeWidgetIframe.remove(),aeWidgetIframe=null,g("body").removeClass("aeWidgetParentActive");else if("string"==typeof a.data&&/ae_widget_goal/.test(a.data)){var c=a.data.match(/ae_widget_goal\.(.*)/);if(c&&c[1]&&("function"==typeof window.gtag?gtag("event",c[1]):void 0!==window.ga&&ga("send","event",c[1]),f&&f.length>0&&f.forEach(function(a){a.reachGoal(c[1])}),"function"==typeof fbq))switch(c[1]){case"AE_CONFIRM_OPENED":fbq("track","InitiateCheckout");break;case"AE_BOOKED":fbq("track","Lead");break;case"AE_PAY_SUCCESS":fbq("track","Purchase")}}else"object"==typeof a.data&&"CHECK_EMBEDDED_SIZE"===a.data.type?g(".aeCustomWidget").attr("height",a.data.height):"hide-main_loader"===a.data&&g(".main-loader",b).remove()},g(b.body).append(s)}(window,window.document,window.location,function(){return window.document.currentScript||function(){var a=window.document.getElementById("aeWidgetScript");if(a)return a;var a=window.document.getElementsByTagName("script");return a[a.length-1]}()}());